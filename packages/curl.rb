require 'package' class Curl < Package description 'Command line tool and library for transferring data with URLs.' homepage 'https://curl.haxx.se/' version '7.71.1' compatibility 'all' source_url 'https://curl.haxx.se/download/curl-7.71.1.tar.xz' source_sha256 '40f83eda27cdbeb25cd4da48cefb639af1b9395d6026d2da1825bf059239658c' binary_url ({ armv7l: 'https://www.dropbox.com/s/c8ihd33c73yqfdz/curl-7.71.1-chromeos-armv7l.tar.xz', }) binary_sha256 ({ armv7l: '826afab948acc1a39047cd5ca80f9fcb8542b10f7267e48c83d02686db963603', }) depends_on 'groff' => :build depends_on 'brotli' depends_on 'libmetalink' depends_on 'libnghttp2' depends_on 'libtirpc' depends_on 'openldap' depends_on 'rtmpdump' depends_on 'libssh' => :build depends_on 'libmbedtls' => :build def self.build ENV['LIBRARY_PATH'] = CREW_LIB_PREFIX ENV['TMPDIR'] = "#{CREW_PREFIX}/tmp" system "./configure #{CREW_OPTIONS} --disable-maintainer-mode --enable-libcurl-option --with-libmetalink \ --enable-static --disable-debug --with-nghttp2 --with-brotli --enable-ldap --with-mbedtls --with-libssh" system 'make' end def self.install system 'make', "DESTDIR=#{CREW_DEST_DIR}", 'install' end end